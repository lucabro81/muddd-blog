---
import IconClose from "./icons/IconClose.astro";
import IconGithub from "./icons/IconGithub.astro";
import IconLinkedin from "./icons/IconLinkedin.astro";
import PageLink from "./PageLink.astro";
import { version } from "../../package.json";
---

<div class="mobile-menu">
  <button class="mobile-menu__close-button" is-="button">
    <IconClose>
  </button>
  <nav class="mobile-menu__nav">
    <ul class="mobile-menu__links-list">
      <li class="links-list__item"><PageLink href="/">/Home</PageLink></li>
      <li class="links-list__item"><PageLink href="/il-progetto">/Il Progetto</PageLink></li>
      <li class="links-list__item"><PageLink href="/ai-disclaimer">/AI Disclaimer</PageLink></li>
    </ul>
  </nav>
  <div class="mobile-menu__separator"></div>
  <nav class="mobile-menu__nav">
    <ul class="mobile-menu__links-list">
      <li class="links-list__item"><a href="/privacy-policy">Privacy Policy</a></li>
      <li class="links-list__item"><a href="#">Powered by webTUI</a></li>
    </ul>
  </nav>
  <div class="mobile-menu__footer">
    <div class="footer__social-links">
      <a class="social-links__item" href="https://github.com/lucabro81" target="_blank" aria-label="GitHub">
        <IconGithub />
      </a>
      <a class="social-links__item" href="https://www.linkedin.com/in/lucabrognara/" target="_blank" aria-label="LinkedIn">
        <IconLinkedin />
      </a>
    </div>
    <div class="footer__theme-toggle">
      <a href=`https://github.com/lucabro81/webTUI/releases/tag/v${version}` target="_blank">v{version}</a>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const closeButton = document.querySelector('.mobile-menu__close-button');
    const mobileMenu = document.querySelector('.mobile-menu-container');

    if (closeButton && mobileMenu) {
      closeButton.addEventListener('click', () => {
        mobileMenu.children[0].classList.toggle('is-open');
      });
    }
  });
</script>

<style>

  .mobile-menu {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 80%;
    height: 100%;
    background-color: var(--background3);
    color: var(--foreground0);
    padding: 1rem;
    box-shadow: 2px 0 5px rgba(0,0,0,0.5);
    z-index: 1000;

    .mobile-menu__close-button[is-~=button] {
      background-color: transparent;
      background-image: none;
      width: fit-content;
      margin: -1rem;
      color: var(--foreground0);
      padding: 0 1rem; 
    }
  }

  .mobile-menu.is-open {
    display: flex;
    flex-direction: column;
    text-align: right;
  }

  .mobile-menu__nav {
    margin-top: 2rem;
  }

  .mobile-menu__links-list {
    list-style: none;
    flex-direction: column;
    gap: 1rem;
  }

  .mobile-menu__footer {
    margin-top: 2rem;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
  }

  .footer__social-links {
    display: flex;
    flex-direction: row;
    gap: 1rem;
    color: var(--foreground0);
  }

  .social-links__item {
    color: var(--foreground0);
  }

  .footer__theme-toggle {
  }

  .links-list__item {
    gap: 0;
    padding-left: 0;
  }
  .links-list__item::before {
    content: "";
  }

  .mobile-menu__separator {
    flex: 1;
  }
</style> 